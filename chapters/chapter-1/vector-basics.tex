\chapter{Vector Basics}
    \section{Recommended Texts}
        The following books are recommended for the course. The first one will be followed by the instructor.
        \begin{enumerate}
            \item Engineering Electromagnetics 8th Edition by John Buck \& William H. Hayt
            \item Electromagnetics John D. Kraus
            \item Introduction to Electrodynamics by David J. Griffiths
            \item Classical Electrodynamics by John David Jackson
        \end{enumerate}
    \section{What is a Vector?}
        From a mathematical standpoint a vector is an element of a vector space. From a physical point of view a vector is a quantity that requires a magnitude as well as a direction to be represented.
    \section{Unit vectors in Rectangular Coordinate System}
        In a Rectangular Coordinate System (RCS), a vector can be represented as a linear sum of three unit vectors, namely $\vec{a}_x$, $\vec{a}_y$ and $\vec{a}_z$. In case of two dimensions, $\vec{a}_z$ is not needed. This is also depicted in figure~\ref{fig:vectors}.
        \begin{figure}
            \centering
            \subfloat[A vector in two dimensions]{
                \input{chapters/chapter-1/diagrams/2d-vector}
            }
            \subfloat[A vector in three dimensions]{
                \input{chapters/chapter-1/diagrams/3d-vector}
            }
            \caption{}
            \label{fig:vectors}
        \end{figure}
    \section{Dot Product}
        Suppose we have two vectors $\vec{A}$ and $\vec{B}$. $\vec{A}$ can be represented as:
        $$\vec{A} = A_x\vec{a}_x + A_y\vec{a}_y + A_z\vec{a}_z$$
        Similarly, $\vec{B}$ can be represented as:
        $$\vec{B} = B_x\vec{a}_x + B_y\vec{a}_y + B_z\vec{a}_z$$
        Their dot product, $\vec{A}\cdot \vec{B}$, which is a scalar quantity, is defined as:
        \begin{equation}\label{eq:dotproductfirst}
            \vec{A}\cdot \vec{B} = |\vec{A}||\vec{B}|\cos \theta
        \end{equation}
        In case when $\theta$ becomes $90^{\circ}$ the dot product automatically reduces to zero. Thus one can easily conclude that the dot product of two perpendicular vectors shall always be zero. This makes expressing the dot product in terms of its components pretty straight forward.
        $$\vec{A}\cdot \vec{B} = \left(A_x\vec{a}_x + A_y\vec{a}_y + A_z\vec{a}_z\right)\cdot \left(B_x\vec{a}_x + B_y\vec{a}_y + B_z\vec{a}_z\right)$$
        \begin{equation}\label{eq:dotproduct}
           \vec{A}\cdot \vec{B} = A_xB_x + A_yB_y + A_zB_z
        \end{equation}
        A vector can also be represented in the form of column vector as:
        $$ \vec{A} = \begin{bmatrix}A_x \\A_y \\A_z\\ \end{bmatrix} \quad \vec{B} = \begin{bmatrix}B_x \\B_y \\B_z\\ \end{bmatrix} $$
        In that case the dot product, also called inner product in this context, is defined as:
        $$ \mathbf{A}^{T}\mathbf{B} $$
        If the vectors $\vec{A}$ and $\vec{B}$ are of the order $n \times 1$ their inner product will have the order $ 1 \times \left(n \times n\right) \times 1 = 1 \times 1$. Thus the result will be a scalar quantity.
        The opposite of the inner product is known as the outer product also called the cross product which we will get to in a later topic.
        
        \subsection{Cauchy Bunyakovsky Schwarz Inequality}
            The theorem states:
            $$|\vec{A}\cdot \vec{B}| \leq |\vec{A}||\vec{B}|$$
            It's easy to see why this is the case by replacing $\vec{A}\cdot \vec{B}$ by it's value:
            $$|\vec{A}||\vec{B}|\cos \theta \leq |\vec{A}||\vec{B}| $$
            This inequality changes to an equality when both vectors are collinear.
        
        \subsection{The Triangle Inequality}
            $$|\vec{A}| + |\vec{B}| \geq |\vec{A} + \vec{B}| $$
            It's quite easy to see why that is the case in the case of two dimensions.
            At this moment it should be useful to point out that:
            $$|\vec{A}| = \sqrt{A_x^2 + A_y^2 + A_z^2}$$
            $$|\vec{A}|^2 = \vec{A} \cdot \vec{A}$$
            This shall be useful in proving the Parallelogram Equality.
        
        \subsection{The Parallelogram Equality}
            The equality states:
            $$|\vec{A} + \vec{B}|^2 + |\vec{A} - \vec{B}|^2 = 2\left(|\vec{A}|^2+\vec{B}^2\right)$$
            To prove it:
            $$|\vec{A} + \vec{B}|^2 = \left(\vec{A}+\vec{B}\right)\cdot \left(\vec{A}+\vec{B}\right)$$
            $$= \vec{A}\cdot \vec{A} + \vec{A}\cdot \vec{B} + \vec{B}\cdot \vec{A} + \vec{B}\cdot \vec{B}$$
            $$= |\vec{A}|^2 -2\vec{A}\cdot \vec{B} + |\vec{B}|^2$$
            Similarly:
            $$|\vec{A} - \vec{B}|^2 = \left(\vec{A}-\vec{B}\right)\cdot \left(\vec{A}-\vec{B}\right)$$
            $$= \vec{A}\cdot \vec{A} - \vec{A}\cdot \vec{B} - \vec{B}\cdot \vec{A} + \vec{B}\cdot \vec{B}$$
            $$= |\vec{A}|^2 +2\vec{A}\cdot \vec{B} + |\vec{B}|^2$$
            Thus:
            $$|\vec{A} + \vec{B}|^2 + |\vec{A} - \vec{B}|^2 = 2|\vec{A}| + 2|\vec{B}| = 2\left(|\vec{A}| + |\vec{B}|\right)$$
        
        \subsection{Scalar component of one vector in the direction of another}
            \input{chapters/chapter-1/diagrams/projectiontwovectors}
            Dot product can be really handy when we want to figure out the projection of one vector onto the direction of another vector. Refer to figure\ref{fig:projectiontwovectors}. The line $\bar{OP}$ is the projection of vector $\vec{B}$ in the direction of $\vec{A}$. Similarly, $\bar{OQ}$ is the projection of vector $\vec{A}$ in the direction of vector $\vec{B}$. Since the line from the tip of vector $\vec{B}$ to $P$ is perpendicular to the vector $\vec{A}$ and the line from the tip of $\vec{A}$ to point $Q$ is perpendicular to vector $\vec{B}$. We can apply trigonometry to find out these projections. 

            \noindent Let $B_A$ denote the projection of vector $\vec{B}$ in the direction of $\vec{A}$ and let $A_B$ denote the projection of $\vec{A}$ in the direction of $\vec{B}$. Applying trigonometry we get:
            $$B_A = |\vec{B}|\cos\theta$$
            $$A_B = |\vec{A}|\sin\theta$$
            Recalling the definition of a dot product from equation~\ref{eq:dotproductfirst} we can see:
            $$B_A = \frac{\vec{A}\cdot\vec{B}}{|\vec{A}|} = \vec{u}_A\cdot\vec{B}$$
            $$A_B = \frac{\vec{A}\cdot\vec{B}}{|\vec{B}|} = \vec{u}_B\cdot\vec{A}$$
        
        \subsection{Some practical applications}
            Some common places in Physics where you will find the dot product being applied are:
            \begin{itemize}
                \item The formulas for work done.
                        $$W = \vec{F}\cdot \vec{d}$$ 
                        $$dW = \vec{F}\cdot \vec{dl}$$
                        $$W = \int\limits_{L} \vec{F}\cdot \vec{dl}$$
                \item The forumulas for Electric and Magnetic flux.
                        $$\phi_E = \vec{E}\cdot \vec{A}$$
                        $$\phi_M = \vec{B}\cdot \vec{A}$$
                \item A third one I don't understand yet. Need to confirm this one.
                        $$Q = \iint\limits_{S}\vec{D}\cdot \vec{dS}$$
            \end{itemize}
    \section{Cross Product}
        \subsection{The Definition}
            The cross product of two vectors $\vec{A}$ and $\vec{B}$ is given by:
            \begin{equation}\label{eq:crossproduct}
                \vec{A}\times \vec{B} = |\vec{A}||\vec{B}|\sin\theta \vec{u}_N
            \end{equation}
            Where $\theta\in\left[0, \pi\right]$ and $\vec{u}_N$ is a vector given by the right hand rule where fingers should be curled from the direction of $\vec{A}$ to the direction of $\vec{B}$.
            Since the direction of the cross product is dictated by the right hand rule we can already see that it is not a commutative operation. More accurately:
            \begin{equation}\label{eq:commutativeincrossproduct}
                \vec{A}\times\vec{B} = - (\vec{B}\times\vec{A})
            \end{equation}
            
        \subsection{Geometric Significance}
            \input{chapters/chapter-1/diagrams/parallelogram}
            As you can see very clearly in figure~\ref{fig:parallelogram} that any two vectors $\vec{A}$ and $\vec{B}$ can uniquely identify a parallelogram. The area of any parallelogram is given by the formula:
            \begin{equation}\label{eq:areaofparallelogram}
            Area = (base)\times(height)
            \end{equation}
            In figure~\ref{fig:parallelogram} the base is the length of the vector $\vec{A}$ and the height is shown by the dotted line. But how do we figure out what $h$ really is? By applying trigonometry here we can find out that $h = |\vec{A}|\sin\theta$. Plugging in these values in equation~\ref{eq:areaofparallelogram} we get:
            $$Area = (|\vec{B}|)(|\vec{A}|\sin\theta)$$
            Ahah, this is exactly the same formula that is given by $\vec{A}\cdot\vec{B}$. Thus we can conclude that the area of the parallelogram formed by two vectors $\vec{A}$ and $\vec{B}$ is given by $\vec{A}\cdot\vec{B}$.
            $$Area = \vec{A}\cdot\vec{B}$$
        
        \subsection{Calculating Cross Product}
            Before we learn how to calculate the cross product of any two vectors in terms of the three basic unit vectors $\vec{a}_x$, $\vec{a}_y$ and $\vec{a}_z$ we should think about what will be the cross production of every possible combination of two of these three unit vectors. We know from equation~\ref{eq:crossproduct} that the cross product of two parallel vectors should be zero because $\sin 90^{\circ} = 0$. We also know that the magnitude of a unit vector is by definition one. Using these two facts, along with the right hand rule, we can very quickly see that:
            $$\vec{a}_x\times\vec{a}_y=\vec{a}_z$$
            $$\vec{a}_y\times\vec{a}_z=\vec{a}_x$$
            $$\vec{a}_z\times\vec{a}_x=\vec{a}_y$$
            Using equation~\ref{eq:commutativeincrossproduct} we can easily figure out the reverses of these combinations:
            $$\vec{a}_y\times\vec{a}_x=-\vec{a}_z$$
            $$\vec{a}_z\times\vec{a}_y=-\vec{a}_x$$
            $$\vec{a}_x\times\vec{a}_z=-\vec{a}_y$$
            Now suppose we have two vectors $\vec{A}$ and $\vec{B}$, we can express them as:
            $$\vec{A} = A_x\vec{a}_x + A_y\vec{a}_y + A_z\vec{a}_z$$
            $$\vec{B} = B_x\vec{a}_x + B_y\vec{a}_y + B_z\vec{a}_z$$
            Their cross product can be written as:
            $$\vec{A}\times\vec{B} = \left(A_x\vec{a}_x + A_y\vec{a}_y + A_z\vec{a}_z\right)\times\left(B_x\vec{a}_x + B_y\vec{a}_y + B_z\vec{a}_z\right)$$
            Expanding this we get:
            \begin{align*}
            \vec{A}\times\vec{B} = A_xB_x(\vec{a}_x\times\vec{a}_x) + A_xB_y(\vec{a}_x\times\vec{a}_y) + A_xB_z(\vec{a}_x\times\vec{a}_z)\\ + A_yB_x(\vec{a}_y\times\vec{a}_x) + A_yB_y(\vec{a}_y\times\vec{a}_y) + A_yB_z(\vec{a}_y\times\vec{a}_z)\\ + A_zB_x(\vec{a}_z\times\vec{a}_x) + A_zB_y(\vec{a}_z\times\vec{a}_y) + A_zB_z(\vec{a}_z\times\vec{a}_z)
            \end{align*}
            Firstly, we can cancel those cross products which are between collinear vectors, as we know that's going to be zero.
            \begin{align*}
            \vec{A}\times\vec{B} = A_xB_y(\vec{a}_x\times\vec{a}_y) + A_xB_z(\vec{a}_x\times\vec{a}_z)\\ + A_yB_x(\vec{a}_y\times\vec{a}_x)  + A_yB_z(\vec{a}_y\times\vec{a}_z)\\ + A_zB_x(\vec{a}_z\times\vec{a}_x) + A_zB_y(\vec{a}_z\times\vec{a}_y) 
            \end{align*}
            Now, just utilizing the crossproducts of all possible combinations between unit vectors that we just derived a while ago, we can simplify this even further:
            \begin{align*}
            \vec{A}\times\vec{B} = A_xB_y(\vec{a}_z) + A_xB_z(-\vec{a}_y)\\ + A_yB_x(-\vec{a}_z)  + A_yB_z(\vec{a}_x)\\ + A_zB_x(\vec{a}_y) + A_zB_y(-\vec{a}_x) 
            \end{align*}
            Grouping these terms by unit vectors we get:
            \begin{equation}
                \vec{A}\times\vec{B} = \vec{a}_x(A_yB_z-A_zB_y) + \vec{a}_y(A_zB_x-A_xB_z) + \vec{a}_z(A_xB_y-A_yB_x)
            \end{equation}
            We can write this in an elegant way as a determinant:
            \begin{equation}
                \vec{A}\times\vec{B} = \begin{vmatrix}
                    \vec{a}_x & \vec{a}_y & \vec{a}_z \\
                    A_x & A_y & A_z\\
                    B_x & B_y & B_z
                \end{vmatrix}
            \end{equation}
        \subsection{Properties}
            Cross Product does not follow the commutative law as we have already seen. However, it does follow distributive law:
            $$\vec{A}\times\left(\vec{B}+\vec{C}\right) = \vec{A}\times\vec{B} + \vec{A}\times\vec{C}$$
        \subsection{Practical Applications}
            \begin{enumerate}
                \item Torque: $$\vec{\tau}=\vec{r}\times\vec{F}$$
                \item Angular Momentum: $$\vec{L}=\vec{r}\times\vec{\rho}$$ $$\vec{\rho}=m\vec{v}$$
                \item Force on a moving conductor: $$\vec{F} = I\vec{L}\times\vec{B}$$
                \item Force on a moving charge: $$\vec{F} = q\vec{v}\times\vec{B}$$
                \item Lorrentz Force Formula: $$\vec{F}=q\left(\vec{E}+\vec{v}\times\vec{B}\right)$$
            \end{enumerate}
    \section{Scalar Triple Product}
        \subsection{Definition}
            The Scalar Triple Product of three vectors $\vec{A}$, $\vec{B}$ and $\vec{C}$ is defined as:
            $$\vec{A}\cdot\left(\vec{B}\times\vec{C}\right)$$
            We already know that:
            \begin{equation}\label{eq:BintoC}
                \vec{B}\times\vec{C} = \begin{vmatrix}\vec{a}_x & \vec{a}_y & \vec{a}_z \\ B_x & B_y & B_z \\ C_x & C_y & C_z \end{vmatrix}
            \end{equation}
            Vector $\vec{A}$ is defined as:
            $$\vec{A} = A_x\vec{a}_x + A_y\vec{a}_y + A_z\vec{a}_z$$
            We also know from equation~\ref{eq:dotproduct} that when the dot product of two vectors is taken, their respective components are mulitplied together, the unit vectors go away and the resultant values are added, right?
            Let $\vec{V}$ represent $\vec{B}\times\vec{C}$. So, $\vec{A}\cdot\vec{V}$ is:
            $$\vec{A}\cdot\vec{V} = A_xV_x + A_yV_y + A_zV_z$$
            From equation~\ref{eq:BintoC} we can see that:
            $$V_x = \begin{vmatrix}B_y & B_z \\ C_y & C_z\end{vmatrix}$$
            $$V_y = -\begin{vmatrix}B_x & B_z \\ C_x & C_z\end{vmatrix}$$
            $$V_z = \begin{vmatrix}B_x & B_y \\ C_x & C_y\end{vmatrix}$$
            Putting these results back we get:
            $$\vec{A}\cdot\vec{V} = A_x\begin{vmatrix}B_y & B_z \\ C_y & C_z\end{vmatrix} + -A_y\begin{vmatrix}B_x & B_z \\ C_x & C_z\end{vmatrix} + \begin{vmatrix}B_x & B_y \\ C_x & C_y\end{vmatrix}$$ 
            Ahah, we have seen something similar while expanding determinants haven't we?
            \begin{equation}\label{eq:scalartriple}
            \vec{A}\cdot\left(\vec{B}\times\vec{C}\right) = \begin{vmatrix}A_x & A_y & A_z\\ B_x & B_y & B_z\\ C_x & C_y & C_z\end{vmatrix}
            \end{equation}
            Exchanging two rows of a determinant two times doesn't really doesn't affect it, right? That fact, leads to the equality:
            $$\vec{B}\cdot\left(\vec{C}\times\vec{A}\right) = \vec{C}\cdot\left(\vec{A}\times\vec{B}\right)$$
            % TODO: Must check this with instructor
            Another property that these follow is:
            $$\vec{A}\cdot\left(\vec{B}\times\vec{C}\right) = \vec{B}\left(\vec{C}\times\vec{A}\right) = \vec{C}\left(\vec{A}\times\vec{B}\right)$$
        \subsection{Applications}
            \subsubsection{Volume of Parallelopiped}
                \input{chapters/chapter-1/diagrams/parallelopiped}
                The area of a parallelopiped can be calculated by the following formula:
                $$Area = (\textrm{area of base face})\times(h)$$
                Where $h$ is the perpendicular distance between the base face and the top face.
                In figure~\ref{fig:parallelopiped} we can see that a parallelopiped is uniquely identified by three vectors $\vec{A}$, $\vec{B}$ and $\vec{C}$. The area of the base face, as we already know, is given by the magnitude of the cross product of $\vec{A}$ and $\vec{B}$. The vector $\vec{A}\times\vec{B}$ is also shown in figure~\ref{fig:parallelopiped}. The magnitude of this vector gives us the area and direction of this vector is perpendicular to the plane formed by $\vec{A}$ and $\vec{B}$. Now we need to figure out the perpendicular distance between the base face and the top face. That distance is given by $|\vec{C}|\cos\theta$. If we take the dot product of $\vec{A}\times\vec{B}$ and $\vec{C}$ we get:
                \begin{align*}
                    \vec{C}\cdot\left(\vec{A}\times\vec{B}\right) = \left(|\vec{C}|\cos\theta\right)\left(|\vec{A}\times\vec{B}|\right)\\ 
                    = \left(|\vec{C}|\cos\theta\right)\left(\textrm{area of base face}\right)\\
                    = \left(\textrm{h}\right)\left(\textrm{area of base face}\right)\\
                    = \textrm{Volume of the parallelopiped}
                \end{align*}
                Hence we have proven that the scalar product of three vectors gives us the volume of the parallelopiped formed by them.
            \subsubsection{Volume of a Tetrahedron}
                \input{chapters/chapter-1/diagrams/tetrahedron}
                A tetrahedron is uniquely identified by three vectors $\vec{A}$, $\vec{B}$ and $\vec{C}$. Figure~\ref{fig:tetrahedron} represents one such tetrahedron. The area of a tetrahedron is given by the following formula:
                $$\left(\textrm{Area of a tetrahedron}\right)=\left(\textrm{Area of base}\right)\times(h)$$
                We can see in figure~\ref{fig:tetrahedron} that:
                $$\textrm{Area of base} = \frac{1}{2}\times\textrm{Area of the parallelogram formed by }\vec{A}, \vec{B}$$
                We also know from the previous sections that:
                $$\textrm{Area of the parallelogram formed by }\vec{A}, \vec{B} = |\vec{A}||\vec{B}|\sin\theta$$
                We can see from figure~\ref{fig:tetrahedron} that:
                $$h = |\vec{C}|\cos\phi$$
                Thus the total volume is given by:
                $$\textrm{Volume} = \frac{1}{3}\left(\frac{1}{2}|\vec{A}||\vec{B}|\sin\theta\right)\left(|\vec{C}|\cos\phi\right)$$
                $$\textrm{Volume} = \frac{1}{6}\left(\vec{A}\times\vec{B}\right)\cdot\vec{C}$$
    \section{Vector Triple Product}
        It is defined as: $$\vec{A}\times \left(\vec{B}\times\vec{C}\right)$$
        This can be evaluated by triple product expansion also known as `Lagrange\'s formula' which is:
        $$\vec{B}\left(\vec{A}\times\vec{C}\right) - \vec{C}\left(\vec{A}\cdot\vec{B}\right)$$
        It can also be represented as `BAC - CAP'.
    \section{Coordinate Systems}
        We will be dealing with three coordinate systems in this development:
        \begin{enumerate}
            \item Rectangular Coordinate System (RCS)
            \item Cylindrical Coordinate System (CCS)
            \item Spherical Coordinate System (SCS)
        \end{enumerate}
        \subsection{Rectangular Coordinate System}
            \input{chapters/chapter-1/diagrams/point-rcs}
            A point in RCS as shown in figure~\ref{fig:point-rcs} is represented by three coordinates $\left(x, y, z\right)$ each representing the distance along that particular axis as shown in the figure. RCS has three unit vectors $\vec{a}_x$, $\vec{a}_y$ and $\vec{a}_z$.
        \subsection{Cylindrical Coordinate System}
            \input{chapters/chapter-1/diagrams/point-ccs}
            A point in CCS, as depicted in figure~\ref{fig:pointinccs}, is represented by three coordinates $\left(\rho, \phi, z\right)$ where $\rho \in [0, \infty)$ and $\phi \in [0, 2\pi]$. $\rho$ is the distance between the origin and the point's projection on the $xy$ plane. $\phi$ is the angle between the x-axis and the $\rho$ line. $z$ is the distance between the point and it's projection on the $xy$ plane. The three unit vectors in this coordinate system are $\vec{a}_\rho$, $\vec{a}_\phi$ and $\vec{a}_z$. $\vec{a}_z$ is the same as in RCS. $\vec{a}_\rho$ takes the direction along the $\rho$ line, and $\vec{a}_\phi$ takes the direction of increasing $\phi$.
            
            Let's write out the equations to convert $(x, y, z)$ to $(\rho, \phi, z)$ and back.
            \begin{align}
                x = \rho\cos\phi \\
                y = \rho\sin\phi \\
                z = z
            \end{align}
            \begin{align}
                \rho = \sqrt{x^2+y^2} \\
                \phi = \tan^{-1}\phi
            \end{align}

            Let's now try and write the equations to represent the unit vectors $\vec{a}_\rho$, $\vec{a}_\phi$ in terms of $\vec{a}_x$, $\vec{a}_y$ and $\vec{a}_z$ respectively. $\vec{a}_z$ doesn't need to be converted since its the same on both sides.
            We call the vector from the origin to the point's projection on xy axis $\vec{\rho}$. $\vec{\rho}$ can be written as:
            $$\vec{\rho} = \rho\cos\phi\vec{a}_x + \rho\sin\phi\vec{a}_y$$
            $$|\vec{\rho}| = \rho$$
            Thus we can write:
            $$\vec{a}_\rho = \cos\phi\vec{a}_x + \sin\phi\vec{a}_y$$
            We can see that $\vec{a}_\phi$ is the cross product of $\vec{a}_z$ and $\vec{a}_\rho$:
            $$\vec{a}_\phi = \vec{a}_z\times\vec{a}_\rho$$
            \begin{align}
                \vec{a}_\rho = \cos\phi\vec{a}_x + \sin\phi\vec{a}_y + 0\vec{a}_z \\ 
                \vec{a}_\phi = -\sin\phi\vec{a}_x + \cos\phi\vec{a}_y + 0\vec{a}_z \\
                \vec{a}_z = 0\vec{a}_x + 0\vec{a}_y + \vec{a}_z
            \end{align}
            Writing this in an elegant form:
            \begin{equation}\label{eq:rcstoccsunit}
                \begin{bmatrix}
                    \vec{a}_\rho \\ \vec{a}_\phi \\ \vec{a}_z 
                \end{bmatrix} = 
                \begin{bmatrix}
                    \cos\phi & \sin\phi & 0 \\
                    -\sin\phi & \cos\phi & 0 \\
                    0 & 0 & 1
                \end{bmatrix}
                \begin{bmatrix}
                    \vec{a}_x \\
                    \vec{a}_y \\
                    \vec{a}_z
                \end{bmatrix}
            \end{equation}
            This can be summarized as:
            $$\vec{u}_c = T\left(\phi\right)\vec{u}_R$$
            Where $T\left(\phi\right)$ is the transformation written as a function of $\phi$. To find the reverse transformation we can take the inverse of this transformation matrix. But we should note that this transformation is what is called an Orthogonal Transformation. In an Orthogonal Transformation the inverse transformation matrix is given by taking the transpose of the transformation matrix. Thus:
            \begin{equation}
                \begin{bmatrix}
                    \vec{a}_x \\ \vec{a}_y \\ \vec{a}_z
                \end{bmatrix} = 
                \begin{bmatrix}
                    \cos\phi & -\sin\phi & 0 \\
                    \sin\phi & \cos\phi & 0 \\
                    0 & 0 & 1
                \end{bmatrix}
                \begin{bmatrix}
                    \vec{a}_\rho \\
                    \vec{a}_\phi \\
                    \vec{a}_z
                \end{bmatrix}
            \end{equation}

            A vector $\vec{A}$ can be represented in RCS as:
            \begin{equation}\label{eq:vectorAinRCS}
                \vec{A} = A_x\vec{a}_x = A_y\vec{a}_y + A_z\vec{a}_z
            \end{equation}
            The same vector can be represented in CCS as:
            $$\vec{A} = A_\rho\vec{a}_\rho + A_\phi\vec{a}_\phi + A_z\vec{a}_z$$
            Let's try to write a relationship between $A_\rho$, $A_\phi$ and $A_z$ in terms of $A_x$, $A_y$ and $A_z$.
            We start with the equation:
            $$\vec{A} = A_\rho\vec{a}_\rho + A_\phi\vec{a}_\phi + A_z\vec{a}_z$$
            We try to replace $\vec{a}_\rho$, $\vec{a}_\phi$ with their RCS counterparts by using equation~\ref{eq:rcstoccsunit}.
            \begin{align*}
                \vec{A} = A_\rho\left(\cos\phi\vec{a}_x + \sin\phi\vec{a}_y\right) + \\
                          A_\phi\left(-\sin\phi\vec{a}_x + \cos\phi\vec{a}_y\right) + \\
                          A_z\vec{a}_z
            \end{align*}
            Grouping the terms in the above equation by unit vectors we get:
            \begin{align*}
                \vec{A} =  + \vec{a}_x\left(A_\rho\cos\phi - A_\phi\sin\phi\right)\\
                           + \vec{a}_y\left(A_\rho\sin\phi + A_\phi\cos\phi\right)\\
                           + A_z\vec{a}_z
            \end{align*}
            Thus comparing this with equation~\ref{eq:vectorAinRCS} we can conclude:
            \begin{align*}
                A_x = A_\rho\cos\phi - A_\phi\sin\phi\\
                A_y = A_\rho\sin\phi + A_\phi\cos\phi\\
                A_z = A_z
            \end{align*}
            We can write this in an elegant way as:
            \begin{equation}
                \begin{bmatrix}
                    A_x \\ A_y \\ A_z
                \end{bmatrix}
                =
                \begin{bmatrix}
                    \cos\phi & -\sin\phi & 0 \\
                    \sin\phi & \cos\phi & 0 \\
                    0 & 0 & 1
                \end{bmatrix}
                \begin{bmatrix}
                    A_\rho \\ A_\phi \\ A_z
                \end{bmatrix}
            \end{equation}
            Since this transformation is orthogonal too we can find the inverse relationship by simply taking the transpose of the transformation matrix:
            \begin{equation}
                \begin{bmatrix}
                    A_\rho \\ A_\phi \\ A_z
                \end{bmatrix}
                =
                \begin{bmatrix}
                    \cos\phi & \sin\phi & 0 \\
                    -\sin\phi & \cos\phi & 0 \\
                    0 & 0 & 1
                \end{bmatrix}
                \begin{bmatrix}
                    A_x \\ A_y \\ A_z
                \end{bmatrix}
            \end{equation}
        \subsection{Spherical Coordinate Systems}
            \input{chapters/chapter-1/diagrams/point-scs.tex}
            A point in spherical coordinate system can be represented as shown in figure~\ref{fig:point-scs}.
            In spherical coordinate system, a point is represented by three coordinates $(r,\phi,\theta)$. Here $r$ is the distance from the origin to the point itself. $\phi$ is the angle the point's projection on the xy-plane makes with the positive x axis. And finally $\theta$ is the angle the line from the origin to the point itself makes with the positive z axis. Two more conditions apply here:
            \begin{align*}
                \theta \in & \left[0,\pi\right]\\
                \phi \in & \left[0, 2\pi\right]
            \end{align*}
            Let's write the equations which can let us convert between spherical coordinates and rectangular coordinates.
            It is very easy to see in figure~\ref{fig:point-scs} that:
            \begin{align*}
                z = r\cos\theta\\
                \rho = r\sin\theta\\
                x = \rho\cos\phi\\
                y = \rho\sin\phi
            \end{align*}
            Thus we can write:
            \begin{align}
                z = r\cos\theta\\
                x = r\sin\theta\cos\phi\\
                y = r\sin\theta\sin\phi
            \end{align}
            We can do the reverse as:
            \begin{align}
                r = & \sqrt{x^2+y^2+z^2}\\
                \theta = & \tan^{-1}\left(\frac{\sqrt{x^2+y^2}}{z}\right)\\
                \theta = & \cos^{-1}\left(\frac{z}{\sqrt{x^2+y^2+z^2}}\right)\\
                \phi = & \tan^{-1}\left(\frac{y}{x}\right)
            \end{align}
            Now we need to express the unit vectors $(\vec{a}_r, \vec{a}_\phi, \vec{a}_\theta)$ in terms of $(\vec{a}_x, \vec{a}_y, \vec{a}_z)$. 
            Suppose we have a vector $\vec{r}$, and $r$ represents its magnitude. We can write it as:
            $$\vec{r} = x\vec{a}_x + y\vec{a}_y + z\vec{a}_z$$
            Dividing both sides by $r$ we get:
            $$\frac{\vec{r}}{r} = \frac{x}{r}\vec{a}_x + \frac{y}{r}\vec{a}_y + \frac{z}{r}\vec{a}_z$$
            Doing some substitutions we get:
            $$\vec{a}_r = \frac{r\sin\theta\cos\phi}{r}\vec{a}_x + \frac{r\sin\theta\sin\phi}{r}\vec{a}_y + \frac{r\cos\theta}{r}\vec{a}_z$$
            Simplifying we get:
            $$\vec{a}_r = \sin\theta\cos\phi\vec{a}_x + 
             \sin\theta\sin\phi\vec{a}_y +
             \cos\theta\vec{a}_z 
            $$
            We already know that:
            $$\vec{a}_\rho = \sin\phi\vec{a}_x + \cos\phi\vec{a}_y$$
            We can see in figure~\ref{fig:point-scs} that the vector $\vec{a}_\phi$ is at an angle $\phi + 90$ from the positive x axis. Thus putting in this angle we get:
            $$\vec{a}_\phi = \sin\left(\phi + 90\right)\vec{a}_x + \cos\left(\phi + 90\right)\vec{a}_y$$
            Using trigonometric identities we can get:
            $$\vec{a}_\phi = -\sin\phi\vec{a}_x + \cos\phi\vec{a}_y$$
            We can get $\vec{a}_\theta$ by realizing that:
            $$\vec{a}_\theta = \vec{a}_\phi \times \vec{a}_r$$
            Evaluating this $\vec{a}_\theta$:
            $$\vec{a}_\theta = 
                \begin{vmatrix}
                    \vec{a}_x & \vec{a}_y & \vec{a}_z \\
                    -\sin\phi & \cos\phi & 0 \\
                    \sin\theta\cos\phi & \sin\theta\sin\phi & \cos\theta 
                \end{vmatrix}$$
            Expanding this we get:
            $$
                \vec{a}_\theta = 
                \vec{a}_x\begin{vmatrix}
                    \cos\phi & 0 \\
                    \sin\theta\sin\phi & \cos\theta
                \end{vmatrix} - 
                \vec{a}_y\begin{vmatrix}
                   -\sin\phi & 0 \\
                   \sin\theta\cos\phi & \cos\theta 
                \end{vmatrix} + 
                \vec{a}_z\begin{vmatrix}
                   -\sin\phi & \cos\phi \\
                   \sin\theta\cos\phi & \sin\theta\sin\phi 
                \end{vmatrix}
            $$
            $$
                \vec{a}_\theta = \cos\theta\cos\phi\vec{a}_x
                + \sin\phi\cos\theta\vec{a}_y
                + \left(-sin^2\phi\sin\theta - \sin\theta\cos^2\phi\right)\vec{a}_z
            $$
            $$
                \vec{a}_\theta = \cos\theta\cos\phi\vec{a}_x
                + \sin\phi\cos\theta\vec{a}_y
                - \sin\theta\vec{a}_z
            $$
            Or more elegantly:
            $$\vec{a}_\theta = 
                \begin{bmatrix}
                    \cos\theta\cos\phi \\
                    \sin\phi\cos\theta \\
                    -\sin\theta
                \end{bmatrix}
            $$
            Or even more elegantly we can write:
            \begin{equation}
                \begin{bmatrix}
                    \vec{a}_r \\
                    \vec{a}_\theta \\
                    \vec{a}_\phi 
                \end{bmatrix} 
                =
                \begin{bmatrix}
                    \sin\theta\cos\phi & \sin\theta\sin\phi & \cos\theta \\
                    \cos\theta\cos\phi & \sin\phi\cos\theta & -\sin\theta \\
                    -\sin\phi & \cos\phi & 0
                \end{bmatrix}
                \begin{bmatrix}
                    \vec{a}_x \\
                    \vec{a}_y \\
                    \vec{a}_z 
                \end{bmatrix}
            \end{equation}
            Some useful relationships between these unit vectors are:
            \begin{align}
                \vec{a}_r \times \vec{a}_\theta & = \vec{a}_\phi \\
                \vec{a}_\theta \times \vec{a}_\phi & = \vec{a}_r \\
                \vec{a}_\phi \times \vec{a}_r & = \vec{a}_\theta 
            \end{align}
            Their reverses are easy to find. They will just have a negative sign.
            Suppose we have a vector $\vec{A}$. We can express it in terms of RCS as:
            $$\vec{A} = \vec{A}_x\vec{a}_x + \vec{A}_y\vec{a}_y + \vec{A}_z\vec{a}_z$$
            We can also express it in SCS as:
            $$\vec{A} = \vec{A}_r\vec{a}_r + \vec{A}_\theta\vec{a}_\theta + \vec{A}_\phi\vec{a}_\phi$$
            Let's replace $\vec{a}_r$, $\vec{a}_\theta$ and $\vec{a}_\phi$ in terms of $\vec{a}_x$, $\vec{a}_y$ and $\vec{a}_z$ using the matrix we just derived:
            \begin{align*}
                \vec{A} = & A_r\left(\sin\theta\cos\phi\vec{a}_x + \sin\theta\sin\phi\vec{a}_y + \cos\theta\vec{a}_z\right) \\
                & A_\theta\left(\cos\theta\cos\phi\vec{a}_x + \sin\phi\cos\theta\vec{a}_y -\sin\theta\vec{a}_z\right) \\ 
                & A_\phi\left(-\sin\phi\vec{a}_x + \cos\phi\vec{a}_y\right)
            \end{align*}
            Let's group these by the unit vectors $\vec{a}_x$, $\vec{a}_y$ and $\vec{a}_z$
            \begin{align*}
                \vec{A} = & \vec{a}_x \left(A_r\sin\theta\cos\phi + A_\theta\cos\theta\cos\phi - A_\phi\sin\phi\right)\\
                & \vec{a}_y \left(A_r\sin\theta\sin\phi + A_\theta\sin\phi\cos\theta + A_\phi\cos\phi\right) \\
                & \vec{a}_z \left(A_r\cos\theta - A_\theta\sin\theta\right)
            \end{align*}
            \begin{equation}
                \begin{bmatrix}
                    A_x \\ A_y \\ A_z    
                \end{bmatrix}
                =
                \begin{bmatrix}
                    \sin\theta\cos\phi & \cos\theta\cos\phi & -\sin\phi \\
                    \sin\theta\sin\phi & \cos\theta\sin\phi & \cos\theta \\
                    \cos\theta & -\sin\theta & 0
                \end{bmatrix}
                \begin{bmatrix}
                    A_r \\ A_\theta \\ A_\phi
                \end{bmatrix}
            \end{equation}
            Transposing this we get the inverse transformation:
            \begin{equation}
                \begin{bmatrix}
                    A_r \\ A_\theta \\ A_\phi    
                \end{bmatrix}
                =
                \begin{bmatrix}
                    \sin\theta\cos\phi & \sin\theta\sin\phi & \cos\theta \\
                    \cos\theta\cos\phi & \cos\theta\sin\phi & -\sin\theta \\
                    -\sin\phi & \cos\theta & 0
                \end{bmatrix}
                \begin{bmatrix}
                    A_x \\ A_y \\ A_z
                \end{bmatrix}
            \end{equation}
        \subsection{A little note about Orthogonal Transformations}
            Orthogonal transformations have this special property that their inverse transformation matrix is just the transpose of the orignal transformation matrix. This is why we have been able to just transpose the matrix and get the reverse transformation matrix. We have done this with RCS to CCS and CCS to RCS transformations and we just did it with RCS to SCS and SCS to RCS. 
            There are two types of orthogonal transformation matrix:
            \begin{itemize}
                \item Rotational Matrix (determinant $1$)
                \item Reflection Matrix (determinant $-1$)
            \end{itemize}
            We can prove that the determinant of an Orthogonal Transformation matrix is always either $1$ or $-1$ as:
            $$A^{-1} = A^T$$
            Let's do a right multiplication by $A$.
            $$A^{-1}A = A^TA$$
            $$I = A^TA$$
            Taking determinant on both sides:
            $$det(I) = det(A^T)det(A)$$
            $$1 = {det(A)}^2$$
            $$det(A) = \pm 1$$
    \section{Differential Lengths, Areas and Volumes}
        \subsection{RCS}
            \input{chapters/chapter-1/diagrams/differentialRCS}
            $$\vec{dl} = dx\vec{a}_x + dy\vec{a}_y + dz\vec{a}_z$$
            $$d\vec{S_x} = dydz\vec{a}_x$$
            $$d\vec{S_y} = dxdz\vec{a}_y$$
            $$d\vec{S_z} = dxdy\vec{a}_z$$
            $$dV = dxdydz$$
        \subsection{CCS}
            \input{chapters/chapter-1/diagrams/differentialCCS}
            $$\vec{dl} = d\rho\vec{a}_\rho + d\phi\vec{a}_\phi + dz\vec{a}_z$$
            $$d\vec{S}_\rho = d\phi\rho dz\vec{a}_\rho$$
            $$d\vec{S}_\phi = d\phi d\rho\vec{a}_\phi$$
            $$d\vec{S}_z = \rho d\phi dz$$
            $$dV = \rho d\phi dz$$
        \subsection{SCS}
            % TODO: complete this diagram
            \input{chapters/chapter-1/diagrams/differentialSCS}
            $$d\vec{l}=dr\vec{a}_r + rd\theta\vec{a}_\phi + r\sin\theta d\phi\vec{a}_\phi$$
            $$d\vec{S}_r = r^2\sin\theta d\phi d\theta \vec{a}_r$$
            $$d\vec{S}_\theta = r\sin\theta dr\vec{a}_\theta$$
            $$d\vec{S}_\phi = rdrd\theta\vec{a}_\phi$$
            $$dV = r^2\sin\theta drd\theta d\phi$$
            Derivation of volume of a sphere:
            $$\int\int\int dV$$
            $$V = \int_{0}^{2\pi}\int_{0}^{\pi}\int_{0}^{R}r^2\sin\theta drd\theta d\phi$$
            $$V = \frac{4\pi{r}^3}{3}$$
    \section{The Nebla Operator}
        % TODO: nabla operator is not as simple as it may sound, this vector definition of nabla looks a little troublesome to me so maybe a expalnation is needed here, will see
        The nabla operator ($\nabla$) will be used at various places to describe different operations. Therefore it will be wise to introduce it at this point and define the various operations that it can represent.
        $$\nabla = \frac{\partial}{\partial x}\vec{a}_x + \frac{\partial}{\partial y}\vec{a}_y + \frac{\partial}{\partial z}\vec{a}_z$$
        There are four operations that it represents:
        \begin{enumerate}
            \item Gradient: $$grad(V) = \nabla V$$ Where $V$ is a scalar field.
            % TODO: figure out whether it only operates on scalar or does it also take in vectors
            \item Divergence: $$div(\vec{V}) = \nabla \cdot \vec{V}$$
            \item Curl: $$curl(\vec{V}) = \nabla \times \vec{V}$$
            \item Laplacian: $$\nabla^2V$$
        \end{enumerate}
        \subsection{Gradient}
            % TODO
            It operates on a scalar field and generates a vector field. The gradient of a scalar field $F$ is defined as:
            $$grad(\vec{F}) = \frac{\partial G}{\partial x}\vec{a}_x + \frac{\partial G}{\partial y}\vec{a}_y + \frac{\partial G}{\partial z}\vec{a}_z$$
            It tells us the direction of maximum increase of a field.
                \subsubsection{Application}
                    $$\vec{E} = -\nabla V$$
        \subsection{Divergence}
            So, let's try to write the divergence of a vector field $\vec{F}$:
            $$div(\vec{F}) = \nabla \cdot \vec{F}$$
            $$div(\vec{F}) = \left(\frac{\partial}{\partial x}\vec{a}_x + \frac{\partial}{\partial y}\vec{a}_y + \frac{\partial}{\partial z}\vec{a}_z\right) \cdot \left(F_x\vec{a}_x + F_y\vec{a}_y + F_z\vec{a}_z\right)$$
            $$\frac{\partial F_x}{\partial x} + \frac{\partial F_y}{\partial y} + \frac{\partial F_z}{\partial z}$$
            One of the maxwell's equation of electromagnetism is:
            $$\nabla \cdot \vec{B} = 0$$
            A description of this in words will be, ``No magnetic monopoles exist''
        \subsection{Curl}
            The curl gives the rotation in a field at some point:
            Suppose a vector field $\vec{F}$ is given by:
            $$\vec{F} = F_x\vec{a}_x + F_y\vec{a}_y + F_z\vec{a}_z$$
            The curl of a vector field $\vec{F}$ is given as:
            $$\nabla \times \vec{F} =
                \begin{vmatrix}
                    \vec{a}_x & \vec{a}_y & \vec{a}_z \\
                    \frac{\partial}{\partial x} & \frac{\partial}{\partial y} & \frac{\partial}{\partial z} \\
                    F_x & F_y & F_z
                \end{vmatrix}
            $$ 
            % TODO: figure out the name of this theorem
            There is a theorem which is stated as:
            $$curl(curl(\vec{F})) = grad(div(\vec{F})) - laplacian(\vec{F})$$
            Or it can be mathematically written as:
            $$\nabla\times\left(\nabla \times \vec{F}\right) = \nabla \left(\nabla\cdot\vec{F}\right) - \nabla^2\vec{F}$$
            Laplacian is just going be defined in the next section.
        \subsection{Laplacian}
            The laplacian can operate on both scalar as well as vector fields. The laplacian of some field $G$ is defined as:
            $$\nabla^2G = \frac{\partial^2}{\partial x^2}G_x + \frac{\partial^2}{\partial y^2}G_y + \frac{\partial^2}{\partial z^2}G_z$$
        \subsection{Nabla in CCS}
            Nabla in cylindrical coordinates is defined as:
            $$\nabla = \frac{\partial}{\partial \rho}\vec{a}_\rho + \frac{1}{\rho}\frac{\partial}{\partial \phi} + \frac{\partial}{\partial z}\vec{a}_z$$
            \subsection{Proof}
                $$x = \rho\cos\phi \quad f(\rho, \phi)$$
                $$y = \rho\sin\phi \quad f(\rho, \phi)$$
                \begin{equation}\label{eq:rhodefinition}
                    \rho^2 = x^2 + y^2
                \end{equation}
                $$\phi = tan^{-1}\left(\frac{y}{x}\right)$$
                Since we know that $x$ is a function of $\rho$ and $\phi$ and $y$ is also a function of these two variables only we can define:
                $$\frac{\partial}{\partial x} = \frac{\partial}{\partial \rho}\frac{\partial \rho}{\partial x} + \frac{\partial}{\partial \phi }\frac{\partial \phi}{\partial x}$$
                $$\frac{\partial}{\partial y} = \frac{\partial}{\partial \rho}\frac{\partial \rho}{\partial y} + \frac{\partial}{\partial \phi }\frac{\partial \phi}{\partial y}$$
                Now to actually use these equations we must figure out some terms:
                $$\vec{a}_x = \cos\phi\vec{a}_\rho - \sin\phi\vec{a}_\phi$$
                $$\vec{a}_y = \sin\phi\vec{a}_\rho + \cos\phi\vec{a}_\phi$$
                We also need to figure out the partial terms:
                Let's differentiate both sides of equation~\ref{eq:eq:rhodefinition} with respect to $x$:
                $$\frac{\partial}{\partial x}\left(\rho^2\right)=\frac{\partial}{\partial x}\left(x^2 + y^2\right)$$
                $$2\rho\frac{\partial \rho}{\partial x} = 2x + 0$$
                $$\frac{\partial \rho}{\partial x} = \frac{x}{\rho} = \cos\phi$$
                Thus:
                \begin{equation}\label{eq:partialrhowrtx}
                   \frac{\partial \rho}{\partial x} = \cos\phi
                \end{equation}
                Doing the same for $y$.
                $$\frac{\partial}{\partial y}\left(\rho^2\right) = \frac{\partial}{\partial y}\left(x^2 + y^2\right)$$
                $$2\rho\frac{\partial \rho}{\partial y} = 2y$$
                $$\frac{\partial \rho}{\partial y} = \frac{y}{\rho} = \sin\phi$$
                Thus:
                \begin{equation}\label{eq:partialrhowrty}
                    \frac{\partial \rho}{\partial y} = \sin\phi
                \end{equation}
                Let's now try to find $\frac{\partial \phi}{\partial x}$:
                $$\frac{\partial \phi}{\partial x} = \frac{\partial}{\partial x}\left(tan^{-1}\left(\frac{y}{x}\right)\right)$$
                \begin{align*}
                \frac{\partial \phi}{\partial x} = & \frac{1}{\left(1 + \frac{y^2}{x^2}\right)}\frac{y}{x}\\
                = & \frac{-y}{x^2+y^2} = \frac{-\rho\sin\phi}{\rho^2} = -\frac{\sin\phi}{\rho}
                \end{align*}
                Doing the same thing to find $\frac{\partial \phi}{\partial y}$:
                $$\frac{\partial \phi}{\partial y} = \frac{1}{1 + \left(\frac{y^2}{x^2}\right)}\frac{1}{x} = 
                \frac{x}{x^2+y^2}=\frac{\rho \cos\phi}{\rho^2} = \frac{\cos\phi}{\rho}$$
                Thus:
                \begin{equation}\label{eq:partialphiwrty}
                   \frac{\partial \phi}{\partial y} = \frac{\cos\phi}{\rho}
                \end{equation}
                \begin{equation}\label{eq:partialphiwrtx}
                    \frac{\partial \phi}{\partial x} = -\frac{\sin\phi}{\rho}
                \end{equation}
                Now we can get the values of $\frac{\partial}{\partial x}$ and $\frac{\partial}{\partial y}$ as:
                $$\frac{\partial}{\partial x} = \cos\phi\frac{\partial}{\partial \phi} + 
                    -\frac{\sin\phi}{\rho}\frac{\partial}{\partial \phi}
                $$
                $$\frac{\partial}{\partial y} = \sin\phi\frac{\partial}{\partial \phi} + 
                    \frac{\cos\phi}{\rho}\frac{\partial}{\partial \phi}
                $$
                Now let's find out $\nabla$.
                $$\nabla = \frac{\partial}{\partial x}\vec{a}_x + 
                    \frac{\partial}{\partial y}\vec{a}_y +
                    \frac{\partial}{\partial z}\vec{a}_z
                $$
                $$
                    \nabla = \left(\cos\phi\frac{\partial}{\partial \rho} - \frac{\sin\phi}{\rho}\frac{\partial}{\partial \phi}\right)\left(\cos\phi\vec{a}_\rho - \sin\phi\vec{a}_\phi\right) +
                    \left(\sin\phi\frac{\partial}{\partial \rho} + \frac{\cos\phi}{\rho}\frac{\partial}{\partial \phi}\right)\left(\sin\phi\vec{a}_\rho + \cos\phi\vec{a}_\phi\right) + \frac{\partial}{\partial z}\vec{a}_z
                $$
                \begin{align*}
                    \nabla = & \cos^2\phi\vec{a}_\phi\frac{\partial}{\partial \rho} - \sin\phi\cos\phi\vec{a}_\phi\frac{\partial}{\partial \rho} - \frac{\sin\phi\cos\phi}{\rho}\frac{\partial}{\partial \phi} + \frac{sin^2\phi}{\rho}\frac{\partial}{\partial \phi} \frac{\partial}{\partial z}\vec{a}_z\\
                    = & \sin^2\phi\vec{a}_\rho\frac{\partial}{\partial \rho} + \sin\phi\cos\phi\vec{a}_\phi\frac{\partial}{\partial \rho} + \frac{\sin\phi\cos\phi}{\rho}\vec{a}_\phi\frac{\partial}{\partial\phi} + \frac{\cos^2\phi}{\rho}\vec{a}_\phi\frac{\partial}{\partial \phi} \frac{\partial}{\partial z}\vec{a}_z
                \end{align*}
                Canceling out the opposite terms:
                $$
                    \nabla = \frac{\partial}{\partial \rho}\left(\sin^2\phi + \cos^2\phi\right)\vec{a}_\rho + \frac{\partial}{\partial \phi}\left(\frac{\sin^2\phi}{\rho} + \frac{\cos^2\phi}{\rho}\right)\vec{a}_\phi + \frac{\partial}{\partial z}\vec{a}_z
                $$
                \begin{equation}
                    \nabla = \frac{\partial}{\partial \rho}\vec{a}_\rho + \frac{1}{\rho}\frac{\partial}{\partial\phi}\vec{a}_\phi + \frac{\partial}{\partial z}\vec{a}_z
                \end{equation}